<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Image Annotator</title>
  
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <link href="index.css" rel="stylesheet">

  <script src="js/bbox_annotator.js"></script>

  <link rel="icon" href="/favicon.ico">
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <link rel="stylesheet" href="css/styles.css?v=1.0">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/jcrop/dist/jcrop.css">
  <script src="https://unpkg.com/jcrop"></script>

</head>

<body>
    <h3>Image Annotator</h3>
    <p> Annotate Images to train Image Based Machine Learning models </p>

    <form method="POST" action="http://localhost:3000/annotations/">
        <div id='image-div'>
        <img id="image" src="/images/Reference.jpeg" alt="Image to be annotated">
    </div>
    <div id='label-container'>
        <input type="text" placeholder="Enter Label" name="label" style="width:200px";} value="">
        <input type="hidden" id="x" name="x">
        <input type="hidden" id="y" name="y">
        <input type="hidden" id="width" name="width">
        <input type="hidden" id="height" name=height>
        <input type="submit" value="Save">
    </div>

    </form>

    <!--
    
    <div class="col-md-3" id="right_bar">
        <div id="annotated_box">
           <h3>Annotations</h3>
       </div>
   </div>
   
    <script>
        $(document).ready(function(){
            $('#image').Jcrop({
                onSelect: function(c){
                    console.log(c);

                    console.log(c.x);
                    console.log(c.y);
                    console.log(c.w);
                    console.log(c.h);
                }
            })
        })
    </script>
    -->
    <script>
        const stage = Jcrop.attach('image',{
        multi: true});

        stage.listen('crop.change',function(widget,e){
    
            const pos = widget.pos;
            document.getElementById('x').value = pos.x
            document.getElementById('y').value = pos.y
            document.getElementById('width').value = pos.w
            document.getElementById('height').value = pos.h
            console.log(pos.x,pos.y,pos.w,pos.h)
            console.log(pos)
        });
    </script>
      
    <script src="js/scripts.js"></script>
</body>
</html>
